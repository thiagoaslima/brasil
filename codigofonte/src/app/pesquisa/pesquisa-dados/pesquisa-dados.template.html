<div class="conteudo__detalhes" [class.aberto]="aberto">
    <div class="cabecalho">
        <h2 class="cabecalho__titulo">{{ tituloPrincipal }}</h2>
        <i class="cabecalho__duvida fa fa-question-circle" aria-hidden="true"></i>
        <div class="cabecalho__download">
            <i class="fa fa-download" aria-hidden="true" (click)="onDownload()"></i>
        </div>

        <select class="cabecalho__combobox" (change)="onChange($event)">
            <option *ngFor="let dado of dadosCombo;">{{ dado.indicador }}</option>
        </select>
    </div>

    <table cellpadding="0" cellspacing="0">
        <tr>
            <td colspan='2'>
                Indicador
            </td>
            <td>
                <select class="tabela__combobox" (change)="mudaAno1($event)">
                    <option *ngFor="let ano of anos;" [selected]="ano == ano1">{{ ano }}</option>
                </select>
            </td>
            <td>
                <select class="tabela__combobox" (change)="mudaAno2($event)" *ngIf="anos && anos.length >= 2">
                    <option *ngFor="let ano of anos;" [selected]="ano == ano2">{{ ano }}</option>
                </select>
            </td>
            <td>
                <select class="tabela__combobox" (change)="mudaAno3($event)" *ngIf="anos && anos.length >= 3">
                    <option *ngFor="let ano of anos;" [selected]="ano == ano3">{{ ano }}</option>
                </select>
            </td>
        </tr>

        <template ngFor let-dado [ngForOf]="dadosTabela">
            <tr [ngClass]="'nivel-' + dado.nivel" (click)="onClick(dado)" *ngIf="dado.visivel"
                [class.nivel-2__cursor]="dado.nivel == 2 && dado.children.length > 0">
                <td>
                    <!--nome do indicador-->
                    <div>
                        {{ dado.indicador }}
                    </div>
                </td>
                <td>
                    <!--Ã­cone da seta-->
                    <i *ngIf="dado.nivel == 2 && dado.children.length > 0" class="fa" aria-hidden="true"
                        [class.fa-chevron-right]="dado.children.length > 0 && !dado.children[0].visivel"
                        [class.fa-chevron-down]="dado.children.length > 0 && dado.children[0].visivel"></i>
                </td>
                <!--valores-->
                <td>
                    {{ dado.res && dado.res[ano1] ? dado.res[ano1] : ' ' }}
                    <span *ngIf="dado.res && dado.res[ano1] && dado.nivel == 0"> <br> {{ dado.unidade?.id }}</span>
                </td>
                <td>
                    {{ dado.res && dado.res[ano2] ? dado.res[ano2] : ' ' }}
                    <span *ngIf="dado.res && dado.res[ano2] && dado.nivel == 0"> <br> {{ dado.unidade?.id }}</span>
                </td>
                <td>
                    {{ dado.res && dado.res[ano3] ? dado.res[ano3] : ' ' }}
                    <span *ngIf="dado.res && dado.res[ano3] && dado.nivel == 0"> <br> {{ dado.unidade?.id }}</span>
                </td>
            </tr>
        </template>
    </table>
</div>